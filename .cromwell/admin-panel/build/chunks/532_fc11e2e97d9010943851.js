"use strict";(self.webpackChunk_cromwell_admin_panel=self.webpackChunk_cromwell_admin_panel||[]).push([[532],{44532:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var r=n(25047),a=n.n(r),i=n(65040),o=n(63756),l=n(76082),c=n(20355),s=n(58568),u=n(87037),d=n(23883),p=n(38677),m=n(31117),g=n(63735),f=n(53242),b=n(92768),x=n(2784),v=n(63884),h=n(91947),y=n(75232),k=n(65479),E=n(28743),w=n(53111),_=n(52820),P=n(80763),T=n(46062),O=n.n(T),j=n(44036),Z=n.n(j),F=n(96793),N=n.n(F),D=n(9978),S=n.n(D),C=n(11173),A=n.n(C),L=n(42464),q=n.n(L),M=n(86686),Q={attributes:{"data-meta":"crw-admin-style"}};Q.styleTagTransform=q(),Q.setAttributes=S(),Q.insert=N().bind(null,"head"),Q.domAPI=Z(),Q.insertStyleElement=A(),O()(M.Z,Q);const I=M.Z&&M.Z.locals?M.Z.locals:void 0;function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function z(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){H(i,r,a,o,l,"next",e)}function l(e){H(i,r,a,o,l,"throw",e)}o(void 0)}))}}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(){return R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R.apply(this,arguments)}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(){var e,t,n=(e=["\n                    fragment AdminPanelTagFragment on Tag {\n                        id\n                        slug\n                        createDate\n                        updateDate\n                        pageTitle\n                        pageDescription\n                        meta {\n                            keywords\n                        }\n                        isEnabled\n                        name\n                        color\n                        image\n                        description\n                        descriptionDelta\n                        customMeta (keys: ",")\n                    }"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return K=function(){return n},n}const U=function(){var e,t,n=(0,v.UO)().id,r=(0,l.getGraphQLClient)(),T=W((0,x.useState)(null),2),O=T[0],j=T[1],Z=W((0,x.useState)(!1),2),F=Z[0],N=Z[1],D=W((0,x.useState)(!1),2),S=D[0],C=D[1],A=W((0,x.useState)(!1),2),L=A[0],q=A[1],M=(0,v.k6)(),Q=W((0,x.useState)(!1),2),G=Q[0],H=Q[1],U="tag-description-editor",X=(t=z(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,r.getTagById(t,(0,i.gql)(K(),JSON.stringify((0,w.He)(o.EDBEntity.Tag))),"AdminPanelTagFragment");case 4:(n=e.sent)&&j(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:return n||N(!0),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[1,8]])}))),function(e){return t.apply(this,arguments)}),J=function(){var e=z(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},q(!0),!n||"new"===n){e.next=7;break}return e.next=5,X(parseInt(n));case 5:r=e.sent;try{(null==r?void 0:r.descriptionDelta)&&(t=JSON.parse(null==r?void 0:r.descriptionDelta))}catch(e){console.error(e)}case 7:return"new"===n&&j({}),q(!1),e.next=11,(0,_.V$)({htmlId:U,data:t,placeholder:"Tag description..."});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){J()}),[]);var V,Y,$,ee,te=function(){var e=z(a().mark((function e(){var t,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H(!0),null==O?void 0:O.name){e.next=3;break}return e.abrupt("return");case 3:return C(!0),e.t0=O.slug,e.t1=O.pageTitle,e.t2=O.pageDescription,e.t3=O.meta&&{keywords:O.meta.keywords},e.t4=O.name,e.t5=O.color,e.t6=O.image,e.t7=O.isEnabled,e.next=14,(0,_.eZ)(U);case 14:return e.t8=e.sent,e.t9=JSON,e.next=18,(0,_.Hd)(U);case 18:return e.t10=e.sent,e.t11=e.t9.stringify.call(e.t9,e.t10),e.t12=Object,e.t13={},e.t14=O.customMeta,e.next=25,(0,w.Q7)(o.EDBEntity.Tag);case 25:if(e.t15=e.sent,e.t16=e.t12.assign.call(e.t12,e.t13,e.t14,e.t15),t={slug:e.t0,pageTitle:e.t1,pageDescription:e.t2,meta:e.t3,name:e.t4,color:e.t5,image:e.t6,isEnabled:e.t7,description:e.t8,descriptionDelta:e.t11,customMeta:e.t16},"new"!==n){e.next=45;break}return e.prev=29,e.next=32,null==r?void 0:r.createTag(t);case 32:return i=e.sent,k.A.success("Created tag!"),M.replace("".concat(E.O_.baseRoute,"/").concat(i.id)),e.next=37,X(i.id);case 37:e.next=43;break;case 39:e.prev=39,e.t17=e.catch(29),k.A.error("Failed to create tag"),console.error(e.t17);case 43:e.next=57;break;case 45:return e.prev=45,e.next=48,null==r?void 0:r.updateTag(O.id,t);case 48:return e.next=50,X(O.id);case 50:k.A.success("Saved!"),e.next=57;break;case 53:e.prev=53,e.t18=e.catch(45),k.A.error("Failed to save"),console.error(e.t18);case 57:C(!1),H(!1);case 59:case"end":return e.stop()}}),e,null,[[29,39],[45,53]])})));return function(){return e.apply(this,arguments)}}(),ne=function(e,t){O&&j((function(n){var r=Object.assign({},n);return r[e]=t,r}))},re=function(){var e=z(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,X(parseInt(n));case 4:return t=e.sent,e.abrupt("return",null==t?void 0:t.customMeta);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return F?x.createElement("div",{className:I.TagPage},x.createElement("div",{className:I.notFoundPage},x.createElement("p",{className:I.notFoundText},"Tag not found"))):(O&&(V=o.serviceLocator.getFrontendUrl()+(0,o.resolvePageRoute)("tag",{slug:null!==(Y=O.slug)&&void 0!==Y?Y:O.id+""})),x.createElement("div",{className:I.TagPage},x.createElement("div",{className:I.header},x.createElement("div",{className:I.headerLeft},x.createElement(u.Z,{onClick:function(){return window.history.back()}},x.createElement(c.Z,{style:{fontSize:"18px"}})),x.createElement("p",{className:P.Z.pageTitle},"tag")),x.createElement("div",{className:I.headerActions},V&&x.createElement(d.Z,{title:"Open tag in the new tab"},x.createElement(u.Z,{style:{marginRight:"10px"},className:I.openPageBtn,"aria-label":"open",onClick:function(){window.open(V,"_blank")}},x.createElement(s.Z,null))),x.createElement(p.Z,{variant:"contained",color:"primary",className:I.saveBtn,size:"small",disabled:S,onClick:te},"Save"))),x.createElement("div",{className:I.fields},L&&Array(8).fill(1).map((function(e,t){return x.createElement(m.Z,{style:{marginBottom:"10px"},key:t,height:"50px"})})),!L&&x.createElement(g.ZP,{container:!0,spacing:3},x.createElement(g.ZP,{item:!0,xs:12,sm:6},x.createElement(f.Z,{label:"Name",value:(null==O?void 0:O.name)||"",fullWidth:!0,variant:"standard",className:I.textField,onChange:function(e){ne("name",e.target.value)},error:G&&!(null==O?void 0:O.name)})),x.createElement(g.ZP,{item:!0,xs:12,sm:6},x.createElement(h.z,{className:I.textField,label:"Color",value:null!==($=null==O?void 0:O.color)&&void 0!==$?$:"#fff",onChange:function(e){return ne("color",e)}})),x.createElement(g.ZP,{item:!0,xs:12,sm:12},x.createElement(f.Z,{label:"Page URL",className:I.textField,fullWidth:!0,variant:"standard",value:(null==O?void 0:O.slug)||"",helperText:V,onChange:function(e){ne("slug",e.target.value)}})),x.createElement(g.ZP,{item:!0,xs:12,sm:12},x.createElement(y.u,{label:"Image",className:I.imageField,onChange:function(e){return ne("image",e)},value:null==O?void 0:O.image,backgroundSize:"cover",showRemove:!0})),x.createElement(g.ZP,{item:!0,xs:12},x.createElement("div",{className:I.descriptionEditor},x.createElement("div",{style:{minHeight:"300px"},id:U}))),x.createElement(g.ZP,{item:!0,xs:12},x.createElement(f.Z,{label:"Meta title",className:I.textField,fullWidth:!0,variant:"standard",value:(null==O?void 0:O.pageTitle)||"",onChange:function(e){ne("pageTitle",e.target.value)}})),x.createElement(g.ZP,{item:!0,xs:12},x.createElement(f.Z,{label:"Meta description",className:I.textField,fullWidth:!0,variant:"standard",value:(null==O?void 0:O.pageDescription)||"",onChange:function(e){ne("pageDescription",e.target.value)}})),x.createElement(g.ZP,{item:!0,xs:12},x.createElement(b.Z,{multiple:!0,freeSolo:!0,options:[],className:I.textField,value:null!==(ee=null==O||null===(e=O.meta)||void 0===e?void 0:e.keywords)&&void 0!==ee?ee:[],getOptionLabel:function(e){return e},onChange:function(e,t){var n;ne("meta",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){B(e,t,n[t])}))}return e}({},null!==(n=O.meta)&&void 0!==n?n:{},{keywords:t}))},renderInput:function(e){return x.createElement(d.Z,{title:"Press ENTER to add"},x.createElement(f.Z,R({},e,{variant:"standard",label:"Meta keywords"})))}})),x.createElement(g.ZP,{item:!0,xs:12},O&&x.createElement(w._i,{entityType:o.EDBEntity.Tag,entityData:O,refetchMeta:re}))))))}},86686:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(8081),a=n.n(r),i=n(23645),o=n.n(i)()(a());o.push([e.id,'.text__OrQl{font-family:"Roboto","sans-serif"}.center_MNdwC{display:flex;align-items:center;justify-content:center}.paper_VgsPf{box-shadow:0 2px 3px 0 rgba(0,0,0,.05),0 0 11px 5px rgba(0,0,0,.05);background-color:#fff;border-radius:5px}.page_CxPcj{display:flex;flex-direction:column;height:100%}.pageHeader_P7qch{display:inline-block}.pageContent_PA4jP{display:inline-block;height:100%;overflow:auto}.pageTitle_kXu54{display:flex;align-items:center;font-weight:500}.pageTitle_kXu54::before{content:"";width:5px;height:5px;background-color:#333;margin-right:8px;display:block;border-radius:100%}.modeDark .pageTitle_kXu54::before{background-color:#eee}.TagPage_q1E0W{padding:20px;max-width:900px;margin:0 auto;width:100%}.header_xQq6D{box-shadow:0 2px 3px 0 rgba(0,0,0,.05),0 0 11px 5px rgba(0,0,0,.05);background-color:#fff;border-radius:5px;padding:5px 10px 5px 0;width:100%;margin-bottom:15px;display:flex;justify-content:space-between;align-items:center}.notFoundPage_lfMQw{display:flex;justify-content:center;align-items:center;height:100%}.notFoundText_hyQyk{font-size:25px;font-weight:500}.headerLeft_imOdi{display:flex;align-items:center}.fields_OSKP7{box-shadow:0 2px 3px 0 rgba(0,0,0,.05),0 0 11px 5px rgba(0,0,0,.05);background-color:#fff;border-radius:5px;padding:20px;margin-bottom:15px}.textField_yMsjH,.imageField_kAYLf{margin-bottom:15px}.descriptionEditor_qGjLy{border:1px solid #bbb;border-radius:5px;max-height:400px;overflow:auto;padding:15px 40px}.descriptionEditor_qGjLy::-webkit-scrollbar{width:.5em;height:.5em}.descriptionEditor_qGjLy::-webkit-scrollbar-track{border-radius:30px;background-color:rgba(0,0,0,.1)}.descriptionEditor_qGjLy::-webkit-scrollbar-thumb{background-color:#888;outline:none;border-radius:30px}.descriptionEditor_qGjLy::-webkit-scrollbar-thumb:hover{background-color:#666}.descriptionEditor_qGjLy::-webkit-scrollbar-thumb:active{background-color:#444}.modeDark .header_xQq6D,.modeDark .fields_OSKP7{background-color:#333}.modeDark .header_xQq6D *,.modeDark .fields_OSKP7 *{color:#eee}',""]),o.locals={text:"text__OrQl",center:"center_MNdwC",paper:"paper_VgsPf",page:"page_CxPcj",pageHeader:"pageHeader_P7qch",pageContent:"pageContent_PA4jP",pageTitle:"pageTitle_kXu54",TagPage:"TagPage_q1E0W",header:"header_xQq6D",notFoundPage:"notFoundPage_lfMQw",notFoundText:"notFoundText_hyQyk",headerLeft:"headerLeft_imOdi",fields:"fields_OSKP7",textField:"textField_yMsjH",imageField:"imageField_kAYLf",descriptionEditor:"descriptionEditor_qGjLy"};const l=o}}]);