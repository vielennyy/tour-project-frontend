"use strict";(self.webpackChunk_cromwell_admin_panel=self.webpackChunk_cromwell_admin_panel||[]).push([[464],{64464:(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var r=n(25047),a=n.n(r),o=n(65040),i=n(63756),l=n(76082),c=n(20355),s=n(58568),u=n(87037),d=n(23883),p=n(38677),g=n(53242),f=n(92768),m=n(2784),v=n(63884),b=n(21827),x=n(75232),h=n(65479),y=n(28743),k=n(53111),w=n(52820),E=n(80763),_=n(46062),P=n.n(_),C=n(44036),N=n.n(C),O=n(96793),j=n.n(O),I=n(9978),T=n.n(I),F=n(11173),S=n.n(F),Z=n(42464),D=n.n(Z),M=n(3891),B={attributes:{"data-meta":"crw-admin-style"}};B.styleTagTransform=D(),B.setAttributes=T(),B.insert=j().bind(null,"head"),B.domAPI=N(),B.insertStyleElement=S(),P()(M.Z,B);const K=M.Z&&M.Z.locals?M.Z.locals:void 0;function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function W(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){L(o,r,a,i,l,"next",e)}function l(e){L(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(){return z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z.apply(this,arguments)}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(){var e,t,n=(e=["\n                    fragment AdminPanelProductCategoryFragment on ProductCategory {\n                        id\n                        slug\n                        createDate\n                        updateDate\n                        isEnabled\n                        pageTitle\n                        pageDescription\n                        meta {\n                            keywords\n                        }\n                        name\n                        mainImage\n                        description\n                        descriptionDelta\n                        children {\n                            id\n                            slug\n                        }\n                        parent {\n                            id\n                            slug\n                        }\n                        customMeta (keys: ",")\n                    }"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return R=function(){return n},n}function V(e){var t,n,r,_=(0,v.UO)().id,P=(0,l.getGraphQLClient)(),C=U((0,m.useState)(!1),2),N=C[0],O=C[1],j=U((0,m.useState)(!1),2),I=j[0],T=j[1],F=(0,v.k6)(),S=U((0,m.useState)(null),2),Z=S[0],D=S[1],M="category-description-editor",B=U((0,m.useState)(null),2),A=B[0],L=B[1],V=U((0,m.useState)(!1),2),H=V[0],X=V[1],q=new URLSearchParams(null==e||null===(t=e.location)||void 0===t?void 0:t.search).get("parentId"),J=(r=W(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,null==P?void 0:P.getProductCategoryById(t,(0,o.gql)(R(),JSON.stringify((0,k.He)(i.EDBEntity.ProductCategory))),"AdminPanelProductCategoryFragment");case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,null,[[1,7]])}))),function(e){return r.apply(this,arguments)}),$=function(){var e=W(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.getProductCategoryById(t);case 3:(n=e.sent)&&(L(n),ae(n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=W(a().mark((function e(){var t,n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_||"new"===_){e.next=16;break}return e.prev=3,e.next=6,J(parseInt(_));case 6:t=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0);case 12:(null==t?void 0:t.id)?D(t):O(!0),(null==t||null===(n=t.parent)||void 0===n?void 0:n.id)&&$(null==t||null===(r=t.parent)||void 0===r?void 0:r.id),e.next=17;break;case 16:"new"===_&&D({});case 17:q&&$(parseInt(q));try{(null==t?void 0:t.descriptionDelta)&&(o=JSON.parse(t.descriptionDelta))}catch(e){console.error(e)}return e.next=22,(0,w.V$)({htmlId:M,data:o,placeholder:"Category description..."});case 22:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}();(0,m.useEffect)((function(){G()}),[]);var Y,ee,te,ne=function(e,t){Z&&D((function(n){var r=Object.assign({},n);return r[e]=t,r}))},re=function(){var e=W(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null==P?void 0:P.getFilteredProductCategories({filterParams:{nameSearch:t},pagedParams:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(e){e&&Z&&e.id===Z.id||D((function(t){var n=Object.assign({},t);return n.parent=null!=e?e:void 0,n}))},oe=function(){var e=W(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Z.slug,e.t1=Z.pageTitle,e.t2=Z.pageDescription,e.t3=Z.meta&&{keywords:Z.meta.keywords},e.t4=Z.name,e.t5=Z.mainImage,e.t6=Z.isEnabled,e.next=10,(0,w.eZ)(M);case 10:return e.t7=e.sent,e.t8=JSON,e.next=14,(0,w.Hd)(M);case 14:return e.t9=e.sent,e.t10=e.t8.stringify.call(e.t8,e.t9),e.t11=null===(t=Z.parent)||void 0===t?void 0:t.id,e.t12=Object,e.t13={},e.t14=Z.customMeta,e.next=22,(0,k.Q7)(i.EDBEntity.ProductCategory);case 22:return e.t15=e.sent,e.t16=e.t12.assign.call(e.t12,e.t13,e.t14,e.t15),e.abrupt("return",{slug:e.t0,pageTitle:e.t1,pageDescription:e.t2,meta:e.t3,name:e.t4,mainImage:e.t5,isEnabled:e.t6,description:e.t7,descriptionDelta:e.t10,parentId:e.t11,customMeta:e.t16});case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=W(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,J(parseInt(_));case 4:return t=e.sent,e.abrupt("return",null==t?void 0:t.customMeta);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=W(a().mark((function e(){var t,n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe();case 2:if(t=e.sent,X(!0),t.name){e.next=6;break}return e.abrupt("return");case 6:if(T(!0),"new"!==_){e.next=26;break}return e.prev=8,e.next=11,null==P?void 0:P.createProductCategory(t);case 11:return n=e.sent,h.A.success("Created category!"),F.replace("".concat(y.t9.baseRoute,"/").concat(n.id)),e.next=16,J(n.id);case 16:(null==(r=e.sent)?void 0:r.id)&&D(r),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(8),h.A.error("Failed to create category"),console.error(e.t0);case 24:e.next=41;break;case 26:if(!(null==Z?void 0:Z.id)){e.next=41;break}return e.prev=27,e.next=30,null==P?void 0:P.updateProductCategory(Z.id,t);case 30:return e.next=32,J(Z.id);case 32:(null==(o=e.sent)?void 0:o.id)&&D(o),h.A.success("Saved!"),e.next=41;break;case 37:e.prev=37,e.t1=e.catch(27),h.A.error("Failed to save"),console.error(e.t1);case 41:T(!1),X(!1);case 43:case"end":return e.stop()}}),e,null,[[8,20],[27,37]])})));return function(){return e.apply(this,arguments)}}();return N?m.createElement("div",{className:K.CategoryPage},m.createElement("div",{className:K.notFoundPage},m.createElement("p",{className:K.notFoundText},"Category not found"))):(Z&&(Y=i.serviceLocator.getFrontendUrl()+(0,i.resolvePageRoute)("category",{slug:null!==(ee=Z.slug)&&void 0!==ee?ee:Z.id+""})),m.createElement("div",{className:K.CategoryPage},m.createElement("div",{className:K.header},m.createElement("div",{className:K.headerLeft},m.createElement(u.Z,{onClick:function(){return window.history.back()}},m.createElement(c.Z,{style:{fontSize:"18px"}})),m.createElement("p",{className:E.Z.pageTitle},"category")),m.createElement("div",{className:K.headerActions},Y&&m.createElement(d.Z,{title:"Open category in the new tab"},m.createElement(u.Z,{style:{marginRight:"10px"},className:K.openPageBtn,"aria-label":"open",onClick:function(){window.open(Y,"_blank")}},m.createElement(s.Z,null))),m.createElement(p.Z,{variant:"contained",color:"primary",className:K.saveBtn,size:"small",disabled:I,onClick:le},"Save"))),m.createElement("div",{className:K.fields},m.createElement(g.Z,{label:"Name",variant:"standard",value:(null==Z?void 0:Z.name)||"",fullWidth:!0,className:K.textField,onChange:function(e){ne("name",e.target.value)},error:H&&!Z.name}),m.createElement(b.Z,{loader:re,onSelect:ae,getOptionLabel:function(e){var t;return"".concat(e.name," (id: ").concat(e.id).concat((null==e||null===(t=e.parent)||void 0===t?void 0:t.id)?"; parent id: ".concat(e.parent.id):"",")")},getOptionValue:function(e){return e.name},fullWidth:!0,className:K.textField,defaultValue:A,label:"Parent category"}),m.createElement(x.u,{placeholder:"No image",onChange:function(e){ne("mainImage",e)},label:"Category image",value:null==Z?void 0:Z.mainImage,className:K.imageBox,showRemove:!0}),m.createElement("div",{className:K.descriptionEditor},m.createElement("div",{style:{minHeight:"300px"},id:M})),m.createElement(g.Z,{label:"Page URL",value:(null==Z?void 0:Z.slug)||"",fullWidth:!0,variant:"standard",className:K.textField,helperText:Y,onChange:function(e){ne("slug",e.target.value)}}),m.createElement(g.Z,{label:"Meta title",value:(null==Z?void 0:Z.pageTitle)||"",fullWidth:!0,variant:"standard",className:K.textField,onChange:function(e){ne("pageTitle",e.target.value)}}),m.createElement(g.Z,{label:"Meta description",value:(null==Z?void 0:Z.pageDescription)||"",fullWidth:!0,variant:"standard",className:K.textField,onChange:function(e){ne("pageDescription",e.target.value)}}),m.createElement(f.Z,{multiple:!0,freeSolo:!0,options:[],className:K.textField,value:null!==(te=null==Z||null===(n=Z.meta)||void 0===n?void 0:n.keywords)&&void 0!==te?te:[],getOptionLabel:function(e){return e},onChange:function(e,t){var n;ne("meta",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Q(e,t,n[t])}))}return e}({},null!==(n=Z.meta)&&void 0!==n?n:{},{keywords:t}))},renderInput:function(e){return m.createElement(d.Z,{title:"Press ENTER to add"},m.createElement(g.Z,z({},e,{variant:"standard",label:"Meta keywords"})))}}),Z&&m.createElement(k._i,{entityType:i.EDBEntity.ProductCategory,entityData:Z,refetchMeta:ie}))))}},3891:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(8081),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,'.text_U6ixi{font-family:"Roboto","sans-serif"}.center_PI9TC{display:flex;align-items:center;justify-content:center}.paper_syKUz{box-shadow:0 2px 3px 0 rgba(0,0,0,.05),0 0 11px 5px rgba(0,0,0,.05);background-color:#fff;border-radius:5px}.page_QkWPw{display:flex;flex-direction:column;height:100%}.pageHeader_dnrvo{display:inline-block}.pageContent_X4C_C{display:inline-block;height:100%;overflow:auto}.pageTitle_WkbQK{display:flex;align-items:center;font-weight:500}.pageTitle_WkbQK::before{content:"";width:5px;height:5px;background-color:#333;margin-right:8px;display:block;border-radius:100%}.modeDark .pageTitle_WkbQK::before{background-color:#eee}.CategoryPage_Ikp8P{position:relative;margin:10px;max-width:900px;margin:0 auto;width:100%;padding:20px}.notFoundPage_t6ua7{display:flex;justify-content:center;align-items:center;height:100%}.notFoundText_oEs6T{font-size:25px;font-weight:500}.header_xkEna{box-shadow:0 2px 3px 0 rgba(0,0,0,.05),0 0 11px 5px rgba(0,0,0,.05);background-color:#fff;border-radius:5px;padding:0 10px 0 0;width:100%;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center}.headerLeft_MKieE{display:flex;align-items:center}.fields_uBax9{box-shadow:0 2px 3px 0 rgba(0,0,0,.05),0 0 11px 5px rgba(0,0,0,.05);background-color:#fff;border-radius:5px;padding:20px;display:flex;flex-direction:column}.modeDark .header_xkEna,.modeDark .fields_uBax9{background-color:#333}.modeDark .header_xkEna *,.modeDark .fields_uBax9 *{color:#eee}.item_VXK0j,.imageBox_jxZ8m,.descriptionEditor_K1fMn,.textField_LV1Na{margin-bottom:20px}.descriptionEditor_K1fMn{border:1px solid #bbb;border-radius:5px;max-height:400px;overflow:auto;padding:15px 40px}.descriptionEditor_K1fMn::-webkit-scrollbar{width:.5em;height:.5em}.descriptionEditor_K1fMn::-webkit-scrollbar-track{border-radius:30px;background-color:rgba(0,0,0,.1)}.descriptionEditor_K1fMn::-webkit-scrollbar-thumb{background-color:#888;outline:none;border-radius:30px}.descriptionEditor_K1fMn::-webkit-scrollbar-thumb:hover{background-color:#666}.descriptionEditor_K1fMn::-webkit-scrollbar-thumb:active{background-color:#444}.mainImage_X8jx5{width:60px;height:40px;background-position:center;background-repeat:no-repeat;background-size:contain}.closeBtn_MQqlk{position:absolute;top:5px;right:5px;z-index:3}',""]),i.locals={text:"text_U6ixi",center:"center_PI9TC",paper:"paper_syKUz",page:"page_QkWPw",pageHeader:"pageHeader_dnrvo",pageContent:"pageContent_X4C_C",pageTitle:"pageTitle_WkbQK",CategoryPage:"CategoryPage_Ikp8P",notFoundPage:"notFoundPage_t6ua7",notFoundText:"notFoundText_oEs6T",header:"header_xkEna",headerLeft:"headerLeft_MKieE",fields:"fields_uBax9",item:"item_VXK0j",imageBox:"imageBox_jxZ8m",descriptionEditor:"descriptionEditor_K1fMn",textField:"textField_LV1Na",mainImage:"mainImage_X8jx5",closeBtn:"closeBtn_MQqlk"};const l=i}}]);