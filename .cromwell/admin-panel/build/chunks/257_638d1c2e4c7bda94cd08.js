"use strict";(self.webpackChunk_cromwell_admin_panel=self.webpackChunk_cromwell_admin_panel||[]).push([[257],{89025:(e,t,r)=>{var n=r(14859);t.Z=void 0;var a=n(r(68671)),i=r(52322),o=(0,a.default)((0,i.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");t.Z=o},60457:(e,t,r)=>{r.d(t,{l:()=>l});var n=r(76082),a=r(2784),i=r(9462);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}var l=a.forwardRef((function(e,t){var r=e.onChange,l=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,["onChange"]);return a.createElement(i.default,o({},l,{getInputRef:t,onValueChange:function(t){r({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:(0,n.getCStore)().getActiveCurrencySymbol()}))}))},56257:(e,t,r)=>{r.r(t),r.d(t,{default:()=>De});var n=r(25047),a=r.n(n),i=r(65040),o=r(63756),l=r(76082),c=r(20355),u=r(58568),s=r(87037),d=r(28485),m=r(41574),p=r(23883),f=r(38677),b=r(31117),v=r(2784),g=r(63884),y=r(65479),h=r(28743),x=r(53111),k=r(47005),E=r(43279),w=r(32548),_=r(80763),P=r(46342),S=r(42921),O=r(40402),Z=r(17055),A=r(12115),I=r(95341),j=r(63123),C=r(46062),T=r.n(C),N=r(44036),D=r.n(N),F=r(96793),B=r.n(F),V=r(9978),M=r.n(V),z=r(11173),U=r.n(z),R=r(42464),L=r.n(R),K=r(23101),W={attributes:{"data-meta":"crw-admin-style"}};W.styleTagTransform=L(),W.setAttributes=M(),W.insert=B().bind(null,"head"),W.domAPI=D(),W.insertStyleElement=U(),T()(K.Z,W);const H=K.Z&&K.Z.locals?K.Z.locals:void 0;function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function J(){return J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J.apply(this,arguments)}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e){var t=e.product,r=e.attributes,n=e.setProdData,a=e.forceUpdate,i=Q(v.useState(null),2),o=i[0],l=i[1],c=Q(v.useState(!1),2),u=c[0],d=c[1],m=[];return r.forEach((function(e){t&&(t.attributes&&t.attributes.some((function(t){return t.key===e.key}))||m.push(e))})),v.createElement("div",null,t.attributes&&r&&t.attributes.map((function(e,i){var o=void 0,l=!0,c=!1,u=void 0;try{for(var d,m=r[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var f=d.value;f.key===e.key&&(o=f)}}catch(e){c=!0,u=e}finally{try{l||null==m.return||m.return()}finally{if(c)throw u}}if(o){var b=o.values.filter((function(t){return!e.values.some((function(e){return e.value===t.value}))})),g=e.values.map((function(e){return e.value}));return v.createElement("div",{className:H.attributeBlock,key:e.key},v.createElement("div",{className:H.attributeHeader},v.createElement("p",{className:H.tag},e.key),v.createElement(p.Z,{title:"Delete attribute"},v.createElement(s.Z,{"aria-label":"delete attribute",onClick:function(){return e=i,void((r=JSON.parse(JSON.stringify(t))).attributes&&(r.attributes=r.attributes.filter((function(t,r){return r!==e})),n(r),a()));var e,r}},v.createElement(P.Z,null)))),v.createElement(j.Z,{left:b.map((function(e){return e.value})),setLeft:function(){},right:g,itemComp:function(e){return v.createElement("div",{className:H.attributeInstanceValue},v.createElement("p",null,e.value))},setRight:function(e){var r=JSON.parse(JSON.stringify(t));r.attributes||(r.attributes=[]);var o=[];e.forEach((function(e){var t=!1;r.attributes[i].values.forEach((function(r){r.value===e&&(o.push(r),t=!0)})),t||o.push({value:e})})),r.attributes[i].values=o.sort((function(e,t){return e.value>t.value?1:-1})),n(r),a()}}))}})),v.createElement(S.Z,{sx:{my:4},style:{width:"100%",display:"flex"}},v.createElement(f.Z,{sx:{mx:"auto",display:"block"},variant:"contained",color:"primary",onClick:function(e){l(e.currentTarget),d((function(e){return!e}))},disabled:!m.length},"Add attribute")),v.createElement(O.Z,{open:u,anchorEl:o,placement:"bottom-start",transition:!0},(function(e){var r=e.TransitionProps;return v.createElement(Z.Z,J({},r,{timeout:350}),v.createElement(A.Z,{className:H.newAttributesList},m.map((function(e){return v.createElement(I.Z,{key:e.key,onClick:function(){return r=e.key,(i=JSON.parse(JSON.stringify(t))).attributes||(i.attributes=[]),i.attributes.push({key:r,values:[]}),d(!1),n(i),void a();var r,i},className:H.newAttributeOption},e.key)}))))})))}var X=r(52559);function G(){return v.createElement("div",{className:H.CategoriesTab},v.createElement(X.default,{embeddedView:!0}))}var $=r(89025),ee=r(63735),te=r(53242),re=r(74607),ne=r(30721),ae=r(80852),ie=r(92768),oe=r(79899),le=r(85974),ce=r(95856),ue=r(52820),se=r(60457);function de(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function me(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){de(i,n,a,o,l,"next",e)}function l(e){de(i,n,a,o,l,"throw",e)}o(void 0)}))}}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(){return fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fe.apply(this,arguments)}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){pe(e,t,r[t])}))}return e}const ve=function(e){var t,r,n,i=(0,v.useRef)(e.product),l=(0,v.useRef)((0,o.getRandStr)(10)),c=(0,v.useRef)(e.product),u=(0,v.useRef)(!1);e.product!==i.current&&(i.current=e.product,c.current=e.product);var s=(0,k.N)(),d="prod-text-editor_"+l.current,m=c.current,f=function(t){Object.keys(t).forEach((function(e){c.current[e]=t[e]})),e.setProdData(t)};(0,v.useEffect)((function(){j()}),[]);var b,g,y,h,E,w,_,P,S,O,Z,A,I,j=(b=me(a().mark((function t(){var r,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==m?void 0:m.descriptionDelta)try{r=JSON.parse(m.descriptionDelta)}catch(e){console.error(e)}return n=(0,oe.debounce)(300,me(a().mark((function t(){var r,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,ue.eZ)(d);case 2:return r=t.sent,t.t0=JSON,t.next=6,(0,ue.Hd)(d);case 6:t.t1=t.sent,n=t.t0.stringify.call(t.t0,t.t1),c.current.description=r,c.current.descriptionDelta=n,e.setProdData(be({},c.current,{description:r,descriptionDelta:n}));case 11:case"end":return t.stop()}}),t)})))),t.next=5,(0,ue.V$)({htmlId:d,data:r,placeholder:"Product description...",onChange:n});case 5:case"end":return t.stop()}}),t)}))),function(){return b.apply(this,arguments)}),C=function(e,t){if(m){var r=Object.assign({},m,pe({},e,t));"images"===e&&(r.mainImage=null==t?void 0:t[0]),f(r),s()}},T=(0,v.useMemo)((function(){return(0,oe.debounce)(300,me(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,x.Q7)(o.EDBEntity.ProductVariant);case 4:t=e.sent,f(Object.assign({},m,{customMeta:t}));case 6:case"end":return e.stop()}}),e)}))))}),[]);return m?((null===(t=m)||void 0===t?void 0:t.slug)&&(g=o.serviceLocator.getFrontendUrl()+(0,o.resolvePageRoute)("product",{slug:null!==(y=m.slug)&&void 0!==y?y:m.id+""})),v.createElement(ee.ZP,{container:!0,spacing:3},v.createElement(ee.ZP,{item:!0,xs:12,sm:12},v.createElement(te.Z,{label:"Name",variant:"standard",value:null!==(h=m.name)&&void 0!==h?h:"",className:H.textField,onChange:function(e){C("name",e.target.value)},error:e.canValidate&&!(null==m?void 0:m.name)})),v.createElement(ee.ZP,{item:!0,xs:12,sm:6},v.createElement(te.Z,{label:"SKU",variant:"standard",value:null!==(E=m.sku)&&void 0!==E?E:"",className:H.textField,onChange:function(e){C("sku",e.target.value)}})),v.createElement(ee.ZP,{item:!0,xs:12,sm:6}),v.createElement(ee.ZP,{item:!0,xs:12,sm:6},v.createElement(ce.P,{fullWidth:!0,label:"Stock status",variant:"standard",value:m.stockStatus,onChange:function(e){C("stockStatus",e.target.value)},options:["In stock","Out of stock","On backorder"]})),v.createElement(ee.ZP,{item:!0,xs:12,sm:6},v.createElement(te.Z,{label:"Stock amount",variant:"standard",value:null!==(w=m.stockAmount)&&void 0!==w?w:"",className:H.textField,type:"number",onChange:function(e){var t=parseInt(e.target.value);isNaN(t)&&(t=null),t&&t<0&&(t=0),C("stockAmount",t)}})),v.createElement(ee.ZP,{item:!0,xs:12,sm:12,style:{display:"flex",alignItems:"center"}},v.createElement(re.Z,null,v.createElement(ne.Z,{control:v.createElement(ae.Z,{defaultChecked:!0}),label:"Manage stock",checked:!!(null==m?void 0:m.manageStock),onChange:function(){return C("manageStock",!(null==m?void 0:m.manageStock))}})),v.createElement(p.Z,{title:"Automatically manage stock amount when new orders placed"},v.createElement($.Z,null))),v.createElement(ee.ZP,{item:!0,xs:12,sm:6},v.createElement(te.Z,{label:"Price",variant:"standard",value:null!==(_=m.price)&&void 0!==_?_:"",className:H.textField,onChange:function(e){C("price",e.target.value)},InputProps:{inputComponent:se.l}})),v.createElement(ee.ZP,{item:!0,xs:12,sm:6},v.createElement(te.Z,{label:"Old price",variant:"standard",value:null!==(P=m.oldPrice)&&void 0!==P?P:"",className:H.textField,onChange:function(e){var t=e.target.value;C("oldPrice",t&&""!==t?t:null)},InputProps:{inputComponent:se.l}})),v.createElement(ee.ZP,{item:!0,xs:12,sm:12},v.createElement("div",{className:H.imageBlock},v.createElement(le.K,{classes:{imagePicker:{root:H.imageItem}},label:"Gallery",images:(null!==(S=null===(r=m)||void 0===r?void 0:r.images)&&void 0!==S?S:[]).map((function(e){return{src:e}})),onChange:function(e){return C("images",e.map((function(e){return e.src})))}}))),v.createElement(ee.ZP,{item:!0,xs:12,sm:12},v.createElement("div",{className:H.descriptionEditor},v.createElement("div",{style:{minHeight:"300px"},id:d}))),e.isProductVariant&&v.createElement(ee.ZP,{item:!0,xs:12,sm:12},v.createElement(x._i,{entityType:o.EDBEntity.ProductVariant,entityData:m,refetchMeta:me(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.customMeta);case 1:case"end":return e.stop()}}),e)}))),onChange:T,onDidMount:function(){return setTimeout((function(){return u.current=!0}),10)}})),v.createElement(ee.ZP,{item:!0,xs:12,sm:12},!0!==e.isProductVariant&&v.createElement(te.Z,{label:"Page URL",variant:"standard",value:null!==(O=m.slug)&&void 0!==O?O:"",className:H.textField,onChange:function(e){C("slug",e.target.value)},helperText:g})),v.createElement(ee.ZP,{item:!0,xs:12,sm:12},!0!==e.isProductVariant&&v.createElement(te.Z,{label:"Meta title",variant:"standard",value:null!==(Z=m.pageTitle)&&void 0!==Z?Z:"",className:H.textField,onChange:function(e){C("pageTitle",e.target.value)}})),v.createElement(ee.ZP,{item:!0,xs:12,sm:12},!0!==e.isProductVariant&&v.createElement(te.Z,{label:"Meta description",variant:"standard",multiline:!0,value:null!==(A=m.pageDescription)&&void 0!==A?A:"",className:H.textField,onChange:function(e){C("pageDescription",e.target.value)}})),v.createElement(ee.ZP,{item:!0,xs:12,sm:12},!0!==e.isProductVariant&&v.createElement(ie.Z,{multiple:!0,freeSolo:!0,options:[],className:H.textField,value:null!==(I=null===(n=m.meta)||void 0===n?void 0:n.keywords)&&void 0!==I?I:[],getOptionLabel:function(e){return e},onChange:function(e,t){var r;C("meta",be({},null!==(r=m.meta)&&void 0!==r?r:{},{keywords:t}))},renderInput:function(e){return v.createElement(p.Z,{title:"Press ENTER to add"},v.createElement(te.Z,fe({},e,{variant:"standard",label:"Meta keywords"})))}})))):null};var ge=r(84485),ye=r(64354),he=r(77152),xe=r.n(he);function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ee(e,t,r[t])}))}return e}function _e(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){if(e){if("string"==typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ke(e,t):void 0}}function Se(e){var t,r,n,a,i,l,c=e.product,u=e.setProdData,d=e.forceUpdate,m=(a=(0,v.useState)({}),i=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(a,i)||Pe(a,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=m[0],b=m[1],g=(null!==(n=c.attributes)&&void 0!==n?n:[]).filter((function(e){var t;return(null===(t=e.values)||void 0===t?void 0:t.length)&&e.key})).map((function(e){return we({},e,{values:e.values.filter(Boolean)})}));if(null===(t=c.variants)||void 0===t?void 0:t.length){var h=!0,x=!1,k=void 0;try{for(var E,w=c.variants[Symbol.iterator]();!(h=(E=w.next()).done);h=!0){var _=E.value;_.id||(_.id=(0,o.getRandStr)(8))}}catch(e){x=!0,k=e}finally{try{h||null==w.return||w.return()}finally{if(x)throw k}}}return v.createElement(S.Z,{id:"product-variants-tab"},v.createElement(S.Z,null,null==c||null===(r=c.variants)||void 0===r?void 0:r.map((function(e){return v.createElement(S.Z,{key:e.id,id:"variant-".concat(e.id),className:H.paper,sx:{my:2}},v.createElement(S.Z,{onClick:function(){return t=e.id,b(Ee({},t,!p[t])),void setTimeout((function(){document.getElementById("variant-".concat(t)).scrollIntoView();var e=function(t){if(t)return t.scrollHeight>t.clientHeight?t:e(t.parentNode)},r=e(document.getElementById("product-variants-tab"));r&&(r.scrollTop=r.scrollTop-15)}),10);var t},sx:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",p:1,borderBottom:p[e.id]&&"1px solid #aaa"}},v.createElement(S.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"}},g.map((function(t){var r;return v.createElement(ce.P,{label:t.key,key:t.key,options:_e(t.values.map((function(e){return{label:e.value,value:e.value}}))).concat([{label:"any",value:"any"}]),value:null!==(l=null===(r=e.attributes)||void 0===r?void 0:r[t.key])&&void 0!==l?l:"any",size:"small",sx:{mr:2},onClick:function(e){return e.stopPropagation()},onChange:function(r){var n=xe()({proto:!0})(c);n.variants=n.variants.map((function(n){var a;return n.id===e.id&&(n.attributes=we({},null!==(a=n.attributes)&&void 0!==a?a:{},Ee({},t.key,r.target.value))),n})),u(n),d()}})}))),v.createElement(S.Z,null,v.createElement(s.Z,{onClick:function(){var t=xe()({proto:!0})(c);t.variants=t.variants.filter((function(t){return e.id!==t.id})),u(t),d()}},v.createElement(P.Z,null)),v.createElement(s.Z,{style:{transform:p[e.id]?"rotate(180deg)":""},"aria-label":"show more"},v.createElement(ge.Z,null)))),v.createElement(ye.Z,{in:p[e.id],timeout:0,unmountOnExit:!0},v.createElement(S.Z,{sx:{my:1,p:2}},v.createElement(ve,{product:e,setProdData:function(t){var r=xe()({proto:!0})(c);r.variants||(r.variants=[]),r.variants=r.variants.map((function(r){return r.id===e.id?we({},t):r})),u(r)},isProductVariant:!0}))))}))),v.createElement(S.Z,{sx:{width:"100%",my:4}},v.createElement(f.Z,{variant:"contained",sx:{mx:"auto",display:"block"},onClick:function(){var e;g.length?(u(we({},c,{variants:_e(null!==(e=null==c?void 0:c.variants)&&void 0!==e?e:[]).concat([{id:(0,o.getRandStr)(8)}])})),d()):y.A.warn("No attributes selected")}},"Add product variant")))}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ze(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function Ae(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Ze(i,n,a,o,l,"next",e)}function l(e){Ze(i,n,a,o,l,"throw",e)}o(void 0)}))}}function Ie(){return Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ie.apply(this,arguments)}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||Ce(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){if(e){if("string"==typeof e)return Oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Oe(e,t):void 0}}function Te(){var e,t,r=(e=["\n                    fragment AdminPanelProductFragment on Product {\n                        id\n                        slug\n                        createDate\n                        updateDate\n                        isEnabled\n                        pageTitle\n                        pageDescription\n                        meta {\n                            keywords\n                        }\n                        name\n                        price\n                        oldPrice\n                        sku\n                        mainImage\n                        images\n                        description\n                        descriptionDelta\n                        views\n                        mainCategoryId\n                        stockAmount\n                        stockStatus\n                        manageStock\n                        categories(pagedParams: {pageSize: 9999}) {\n                            id\n                        }\n                        customMeta (keys: ",")\n                        attributes {\n                            key\n                            values {\n                                value\n                            }\n                        }\n                        variants {\n                            id\n                            name\n                            price\n                            oldPrice\n                            sku\n                            mainImage\n                            images\n                            description\n                            descriptionDelta\n                            stockAmount\n                            stockStatus\n                            manageStock\n                            attributes\n                            customMeta (keys: ",")\n                        }\n                    }"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return Te=function(){return r},r}function Ne(e){var t=e.children,r=e.value,n=e.index,a=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,["children","value","index"]);return v.createElement("div",Ie({className:H.tab,role:"tabpanel",hidden:r!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},a),r===n&&v.createElement("div",{className:H.tabContent},t))}const De=function(){var e=(0,g.UO)().id,t=(0,l.getGraphQLClient)(),r=je((0,v.useState)(!1),2),n=r[0],P=r[1],S=je((0,v.useState)([]),2),O=S[0],Z=S[1],A=je(v.useState(0),2),I=A[0],j=A[1],C=v.useRef(null),T=je((0,v.useState)(!1),2),N=T[0],D=T[1],F=je((0,v.useState)(!1),2),B=F[0],V=F[1],M=(0,k.N)(),z=(0,g.k6)(),U=C.current,R=function(e){C.current=Object.assign({},C.current,e)};(0,v.useEffect)((function(){return function(){(0,E.W4)()}}),[]);var L,K=(L=Ae(a().mark((function r(){var n,l,c;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e||"new"===e){r.next=14;break}return r.prev=2,r.next=5,null==t?void 0:t.getProductById(parseInt(e),(0,i.gql)(Te(),JSON.stringify((0,x.He)(o.EDBEntity.Product)),JSON.stringify((0,x.He)(o.EDBEntity.ProductVariant))),"AdminPanelProductFragment");case 5:n=r.sent,r.next=11;break;case 8:r.prev=8,r.t0=r.catch(2),console.error(r.t0);case 11:(null==n?void 0:n.id)?(R(n),w.h.setStateProp({prop:"selectedItems",payload:(l=Object).assign.apply(l,[{}].concat((a=(null!==(c=n.categories)&&void 0!==c?c:[]).map((function(e){return t={},(r=e.id)in t?Object.defineProperty(t,r,{value:!0,enumerable:!0,configurable:!0,writable:!0}):t[r]=!0,t;var t,r})),function(e){if(Array.isArray(e))return Oe(e)}(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||Ce(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())))}),w.h.setStateProp({prop:"selectedItem",payload:null==n?void 0:n.mainCategoryId}),M()):D(!0),r.next=15;break;case 14:"new"===e&&(R({}),M());case 15:return r.abrupt("return",n);case 16:case"end":return r.stop()}var a}),r,null,[[2,8]])}))),function(){return L.apply(this,arguments)}),W=function(){var e=Ae(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==t?void 0:t.getAttributes();case 3:(r=e.sent)&&Z(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){Ae(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,W();case 3:return e.next=5,K();case 5:P(!1);case 6:case"end":return e.stop()}}),e)})))()}),[]);var Y,J,Q=function(){var t=Ae(a().mark((function t(){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,K();case 4:return r=t.sent,t.abrupt("return",null==r?void 0:r.customMeta);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),X=function(){var r=Ae(a().mark((function r(){var n,i,l,c,u,s,d,m,p,f,b,v;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=C.current,V(!0),null==i?void 0:i.name){r.next=5;break}return r.abrupt("return");case 5:if(l=null===(n=i.attributes)||void 0===n?void 0:n.map((function(e){return{key:e.key,values:e.values?e.values.map((function(e){return{value:e.value}})):[]}})),c=w.h.getState().selectedItems,u=Object.keys(c).filter((function(e){return c[e]})).map(Number).filter(Boolean),(d=null!==(s=w.h.getState().selectedItem)&&void 0!==s?s:null)&&!u.includes(d)&&(d=null),!i){r.next=75;break}return r.t0=i.name,r.t1=u,r.t2=d,r.t3="string"==typeof i.price?parseFloat(i.price):i.price,r.t4="string"==typeof i.oldPrice?parseFloat(i.oldPrice):i.oldPrice,r.t5=i.sku,r.t6=i.mainImage,r.t7=i.images,r.t8=null!==(f=i.stockStatus)&&void 0!==f?f:"In stock",r.t9=i.stockAmount,r.t10=i.manageStock,r.t11=i.description,r.t12=i.descriptionDelta,r.t13=i.slug,r.t14=l,r.t15=i.pageTitle,r.t16=i.pageDescription,r.t17=i.meta&&{keywords:i.meta.keywords},r.t18=null===(m=i.variants)||void 0===m?void 0:m.map((function(e){return{id:"number"==typeof e.id?e.id:void 0,name:e.name,price:"string"==typeof e.price?parseFloat(e.price):e.price,oldPrice:"string"==typeof e.oldPrice?parseFloat(e.oldPrice):e.oldPrice,sku:e.sku,mainImage:e.mainImage,images:e.images,description:e.description,descriptionDelta:e.descriptionDelta,stockAmount:e.stockAmount,stockStatus:e.stockStatus,manageStock:e.manageStock,attributes:e.attributes,customMeta:e.customMeta}})),r.t19=Object,r.t20={},r.t21=i.customMeta,r.next=38,(0,x.Q7)(o.EDBEntity.Product);case 38:if(r.t22=r.sent,r.t23=r.t19.assign.call(r.t19,r.t20,r.t21,r.t22),r.t24=i.isEnabled,b={name:r.t0,categoryIds:r.t1,mainCategoryId:r.t2,price:r.t3,oldPrice:r.t4,sku:r.t5,mainImage:r.t6,images:r.t7,stockStatus:r.t8,stockAmount:r.t9,manageStock:r.t10,description:r.t11,descriptionDelta:r.t12,slug:r.t13,attributes:r.t14,pageTitle:r.t15,pageDescription:r.t16,meta:r.t17,variants:r.t18,customMeta:r.t23,isEnabled:r.t24},(null===(p=b.variants)||void 0===p?void 0:p.length)&&(b.variants.forEach((function(e,t){var r,n={};Object.entries(null!==(r=e.attributes)&&void 0!==r?r:{}).forEach((function(e){var t=je(e,2),r=t[0],a=t[1];a&&"any"!==a&&(n[r]=a)})),Object.keys(n).length||delete b.variants[t]})),b.variants=b.variants.filter(Boolean)),"new"!==e){r.next=63;break}return P(!0),r.prev=45,r.next=48,null==t?void 0:t.createProduct(b);case 48:if(!(null==(v=r.sent)?void 0:v.id)){r.next=53;break}y.A.success("Created product"),z.replace("".concat(h.On.baseRoute,"/").concat(v.slug)),v&&R(v),M(),r.next=54;break;case 53:throw new Error("!prod?.id");case 54:r.next=60;break;case 56:r.prev=56,r.t25=r.catch(45),y.A.error("Failed to create"),console.error(r.t25);case 60:P(!1),r.next=75;break;case 63:return r.prev=63,r.next=66,null==t?void 0:t.updateProduct(i.id,b);case 66:return r.next=68,K();case 68:y.A.success("Updated product"),r.next=75;break;case 71:r.prev=71,r.t26=r.catch(63),y.A.error("Failed to update"),console.error(r.t26);case 75:V(!1);case 76:case"end":return r.stop()}}),r,null,[[45,56],[63,71]])})));return function(){return r.apply(this,arguments)}}();return N?v.createElement("div",{className:H.Product},v.createElement("div",{className:H.notFoundPage},v.createElement("p",{className:H.notFoundText},"Product not found"))):((null==U?void 0:U.slug)&&(Y=o.serviceLocator.getFrontendUrl()+(0,o.resolvePageRoute)("product",{slug:null!==(J=U.slug)&&void 0!==J?J:U.id+""})),v.createElement("div",{className:H.Product},v.createElement("div",{className:H.header},v.createElement("div",{className:H.headerLeft},v.createElement(s.Z,{onClick:function(){return window.history.back()}},v.createElement(c.Z,{style:{fontSize:"18px"}})),v.createElement("p",{className:_.Z.pageTitle},"product")),v.createElement("div",null,v.createElement(d.Z,{value:I,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){j(t)}},v.createElement(m.Z,{label:"Main"}),v.createElement(m.Z,{label:"Attributes"}),v.createElement(m.Z,{label:"Variants"}),v.createElement(m.Z,{label:"Categories"}))),v.createElement("div",{className:H.headerActions},Y&&v.createElement(p.Z,{title:"Open product in the new tab"},v.createElement(s.Z,{className:H.openPageBtn,"aria-label":"open",onClick:function(){window.open(Y,"_blank")}},v.createElement(u.Z,null))),v.createElement(f.Z,{variant:"contained",color:"primary",size:"small",className:H.saveBtn,onClick:X},"Save"))),n&&v.createElement(b.Z,{width:"100%",height:"100%",style:{transform:"none",margin:"20px 0"}}),!n&&U&&v.createElement(v.Fragment,null,v.createElement(Ne,{value:I,index:0},v.createElement("div",{className:H.mainTab},v.createElement(ve,{product:U,setProdData:R,canValidate:B}),v.createElement("div",{style:{marginBottom:"15px"}}),v.createElement(x._i,{entityType:o.EDBEntity.Product,entityData:U,refetchMeta:Q}))),v.createElement(Ne,{value:I,index:1},v.createElement(q,{forceUpdate:M,product:U,attributes:O,setProdData:R})),v.createElement(Ne,{value:I,index:2},v.createElement(Se,{forceUpdate:M,product:U,attributes:O,setProdData:R})),v.createElement(Ne,{value:I,index:3},v.createElement(G,null)))))}},23101:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),a=r.n(n),i=r(23645),o=r.n(i)()(a());o.push([e.id,'.text_lsZ1X{font-family:"Roboto","sans-serif"}.center_L5Djk{display:flex;align-items:center;justify-content:center}.paper_EUxvY{box-shadow:0 2px 3px 0 rgba(0,0,0,.05),0 0 11px 5px rgba(0,0,0,.05);background-color:#fff;border-radius:5px}.page__qtHo{display:flex;flex-direction:column;height:100%}.pageHeader_lcBFI{display:inline-block}.pageContent_ILmZa{display:inline-block;height:100%;overflow:auto}.pageTitle_z6Ya7{display:flex;align-items:center;font-weight:500}.pageTitle_z6Ya7::before{content:"";width:5px;height:5px;background-color:#333;margin-right:8px;display:block;border-radius:100%}.modeDark .pageTitle_z6Ya7::before{background-color:#eee}.Product_SFk2S{position:relative;width:100%;height:100%;padding:20px;padding-bottom:0;max-width:900px;margin:0 auto;display:flex;flex-direction:column;min-height:300px}.paper_EUxvY{box-shadow:0 2px 3px 0 rgba(0,0,0,.05),0 0 11px 5px rgba(0,0,0,.05);background-color:#fff;border-radius:5px}.header_v6F4Q{box-shadow:0 2px 3px 0 rgba(0,0,0,.05),0 0 11px 5px rgba(0,0,0,.05);background-color:#fff;border-radius:5px;width:100%;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;z-index:20}.headerLeft_K2QdB{display:flex;align-items:center}.headerActions_XBzOp{padding-right:15px}.tab_ebiTu{overflow:auto;height:100%;min-height:300px;margin-left:-10px;padding-left:10px;padding-right:10px;padding-top:15px;padding-bottom:15px}.tab_ebiTu::-webkit-scrollbar{width:.5em;height:.5em}.tab_ebiTu::-webkit-scrollbar-track{border-radius:30px;background-color:rgba(0,0,0,.1)}.tab_ebiTu::-webkit-scrollbar-thumb{background-color:#888;outline:none;border-radius:30px}.tab_ebiTu::-webkit-scrollbar-thumb:hover{background-color:#666}.tab_ebiTu::-webkit-scrollbar-thumb:active{background-color:#444}.tab_ebiTu::-webkit-scrollbar-track{margin-top:15px;margin-bottom:15px}.mainTab_zRqZ9{box-shadow:0 2px 3px 0 rgba(0,0,0,.05),0 0 11px 5px rgba(0,0,0,.05);background-color:#fff;border-radius:5px;padding:15px}.textField_LFy3c{width:100%}.imageBlock_IoWuU{position:relative;border:1px solid #bbb;border-radius:5px;display:flex;padding:10px}.imageItem_IJw4m{position:relative}.DraggableBlock__dragging .imageItem_IJw4m{background-color:transparent}.imageActions_hUdbe{opacity:0;transition:.3s;position:absolute;top:5px;right:5px}.saveBtn_T55Ch{position:relative}.attributeBlock_TTjvm{box-shadow:0 2px 3px 0 rgba(0,0,0,.05),0 0 11px 5px rgba(0,0,0,.05);background-color:#fff;border-radius:5px;border-radius:5px;width:670px;max-width:100%;margin:0 auto 20px}.attributeHeader_xazsZ{display:flex;justify-content:space-between;align-items:center;padding-left:10px;border-bottom:1px solid #ccc}.tag_nCMNp{font-size:18px;border:1px solid #333;padding:2px 6px;border-radius:3px}.attributeInstanceValue_KWKsW{display:flex;justify-content:space-between;align-items:center;min-width:100px}.editingProductVariant_tMgyz{border:1px solid #bbb;margin:10px;border-radius:5px}.editingProductVariantCard_sxjXK{padding:10px}.editingProductVariantTitle_V8cuF{font-size:18px;font-weight:500}.editingProductVariantTitle_V8cuF .tag_nCMNp{margin-left:15px}.notFoundPage_mhOs2{display:flex;justify-content:center;align-items:center;height:100%}.notFoundText_DM5YU{font-size:25px;font-weight:500}.galleryActions_EsG8F{display:flex;flex-direction:column;border-left:1px solid #ccc}.galleryContainer_azrNa{width:calc(100% - 50px)}button.galleryActionBtn_q_WWF,button.galleryAddImageBtn_cDgj2{background-color:rgba(255,255,255,.7)}button.galleryActionBtn_q_WWF:hover,button.galleryAddImageBtn_cDgj2:hover{background-color:rgba(0,0,0,.3)}button.galleryActionBtn_q_WWF:hover svg,button.galleryAddImageBtn_cDgj2:hover svg{color:#fff}.openPageBtn_FrY0Q{margin-right:10px}.newAttributesList_K0rNw{background-color:#fff;max-height:90vh;overflow:auto}.newAttributeOption_rDiM1{min-width:130px}.descriptionEditor_KlVoE{border:1px solid #bbb;border-radius:5px;max-height:400px;overflow:auto;padding:15px 40px;min-height:150px}.descriptionEditor_KlVoE::-webkit-scrollbar{width:.5em;height:.5em}.descriptionEditor_KlVoE::-webkit-scrollbar-track{border-radius:30px;background-color:rgba(0,0,0,.1)}.descriptionEditor_KlVoE::-webkit-scrollbar-thumb{background-color:#888;outline:none;border-radius:30px}.descriptionEditor_KlVoE::-webkit-scrollbar-thumb:hover{background-color:#666}.descriptionEditor_KlVoE::-webkit-scrollbar-thumb:active{background-color:#444}.CategoriesTab_YZcAs{margin:0 -10px}@media screen and (max-width: 869px){.Product_SFk2S .header_v6F4Q{justify-content:space-around}.tab_ebiTu{overflow:visible;height:auto;padding-right:0}}.modeDark .mainTab_zRqZ9,.modeDark .header_v6F4Q,.modeDark .paper_EUxvY,.modeDark .attributeBlock_TTjvm{background-color:#333}.modeDark .mainTab_zRqZ9 *,.modeDark .header_v6F4Q *,.modeDark .paper_EUxvY *,.modeDark .attributeBlock_TTjvm *{color:#eee}.modeDark .imageItem_IJw4m:hover{background-color:#555}',""]),o.locals={text:"text_lsZ1X",center:"center_L5Djk",paper:"paper_EUxvY",page:"page__qtHo",pageHeader:"pageHeader_lcBFI",pageContent:"pageContent_ILmZa",pageTitle:"pageTitle_z6Ya7",Product:"Product_SFk2S",header:"header_v6F4Q",headerLeft:"headerLeft_K2QdB",headerActions:"headerActions_XBzOp",tab:"tab_ebiTu",mainTab:"mainTab_zRqZ9",textField:"textField_LFy3c",imageBlock:"imageBlock_IoWuU",imageItem:"imageItem_IJw4m",imageActions:"imageActions_hUdbe",saveBtn:"saveBtn_T55Ch",attributeBlock:"attributeBlock_TTjvm",attributeHeader:"attributeHeader_xazsZ",tag:"tag_nCMNp",attributeInstanceValue:"attributeInstanceValue_KWKsW",editingProductVariant:"editingProductVariant_tMgyz",editingProductVariantCard:"editingProductVariantCard_sxjXK",editingProductVariantTitle:"editingProductVariantTitle_V8cuF",notFoundPage:"notFoundPage_mhOs2",notFoundText:"notFoundText_DM5YU",galleryActions:"galleryActions_EsG8F",galleryContainer:"galleryContainer_azrNa",galleryActionBtn:"galleryActionBtn_q_WWF",galleryAddImageBtn:"galleryAddImageBtn_cDgj2",openPageBtn:"openPageBtn_FrY0Q",newAttributesList:"newAttributesList_K0rNw",newAttributeOption:"newAttributeOption_rDiM1",descriptionEditor:"descriptionEditor_KlVoE",CategoriesTab:"CategoriesTab_YZcAs"};const l=o}}]);