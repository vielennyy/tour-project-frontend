"use strict";(self.webpackChunk_cromwell_admin_panel=self.webpackChunk_cromwell_admin_panel||[]).push([[283],{16366:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(6620),a=n(52322);const o=(0,r.Z)((0,a.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility")},76901:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(6620),a=n(52322);const o=(0,r.Z)((0,a.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff")},23283:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var r=n(25047),a=n.n(r),o=n(63756),s=n(76082),l=n(53242),i=n(30680),c=n(87037),u=n(38677),d=n(16366),p=n(76901),m=n(2784),f=n(63884),g=n(65479),v=n(46062),b=n.n(v),h=n(44036),x=n.n(h),w=n(96793),y=n.n(w),k=n(9978),E=n.n(k),C=n(11173),_=n.n(C),Z=n(42464),A=n.n(Z),P=n(96260),F={attributes:{"data-meta":"crw-admin-style"}};F.styleTagTransform=A(),F.setAttributes=E(),F.insert=y().bind(null,"head"),F.domAPI=x(),F.insertStyleElement=_(),b()(P.Z,F);const I=P.Z&&P.Z.locals?P.Z.locals:void 0;function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t,n,r,a,o,s){try{var l=e[o](s),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function z(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){N(o,r,a,s,l,"next",e)}function l(e){N(o,r,a,s,l,"throw",e)}s(void 0)}))}}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],s=!0,l=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){l=!0,a=e}finally{try{s||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const T=function(){var e,t=(0,s.getRestApiClient)(),n=L((0,m.useState)(!1),2),r=n[0],v=n[1],b=L((0,m.useState)(!1),2),h=b[0],x=b[1],w=L((0,m.useState)(!1),2),y=w[0],k=w[1],E=L((0,m.useState)(""),2),C=E[0],_=E[1],Z=L((0,m.useState)(""),2),A=Z[0],P=Z[1],F=L((0,m.useState)(""),2),S=F[0],N=F[1],T=(0,f.k6)(),j=L((0,m.useState)("sign-in"),2),G=j[0],W=j[1],B=function(){v(!r)},M=(e=z(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n||null===(r=n.preventDefault)||void 0===r||r.call(n),k(!0),C&&S){e.next=5;break}return e.abrupt("return");case 5:return x(!0),e.prev=6,e.next=9,t.login({email:C,password:S},{disableLog:!0});case 9:R(!0),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),0===e.t0.statusCode?g.A.error("Could not connect to the Server"):g.A.error("Incorrect email or password"),console.error(e.t0);case 16:x(!1);case 17:case"end":return e.stop()}}),e,null,[[6,12]])}))),function(t){return e.apply(this,arguments)}),R=function(){var e=z(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getUserInfo({disableLog:!0});case 2:if(!(null==(r=e.sent)?void 0:r.id)){e.next=11;break}if(r.role&&r.email){e.next=7;break}return n&&g.A.error("Incorrect user account"),e.abrupt("return");case 7:(0,o.setStoreItem)("userInfo",r),D(r),e.next=12;break;case 11:n&&g.A.error("Incorrect email or password");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,m.useEffect)((function(){R()}),[]);var D=function(e){var t;if("administrator"===e.role||"guest"===e.role)null==T||null===(t=T.push)||void 0===t||t.call(T,"/");else if("author"===e.role){var n;null==T||null===(n=T.push)||void 0===n||n.call(T,"/post-list")}else g.A.error("Access forbidden")},J=function(){var e=z(a().mark((function e(){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C&&""!=C){e.next=2;break}return e.abrupt("return");case 2:return x(!0),e.prev=3,e.next=6,null==t?void 0:t.forgotPassword({email:C},{disableLog:!0});case 6:if(!e.sent){e.next=11;break}g.A.success("We sent you an e-mail"),W("reset-pass"),e.next=12;break;case 11:throw new Error("!success");case 12:e.next=20;break;case 14:e.prev=14,e.t0=e.catch(3),console.error(e.t0),n=null===e.t0||void 0===e.t0?void 0:e.t0.message;try{n=JSON.parse(e.t0.message)}catch(e){}429===(null==n?void 0:n.statusCode)||null===(r=g.A.error)||void 0===r||r.call(g.A,"Incorrect e-mail or user was not found");case 20:x(!1);case 21:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=z(a().mark((function e(){var n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C&&A&&S){e.next=2;break}return e.abrupt("return");case 2:return x(!0),e.prev=3,e.next=6,null==t?void 0:t.resetPassword({email:C,code:A,newPassword:S});case 6:if(!e.sent){e.next=11;break}g.A.success("Password has been changed."),W("sign-in"),e.next=12;break;case 11:throw new Error("!success");case 12:e.next=20;break;case 14:e.prev=14,e.t0=e.catch(3),console.error(e.t0),n=null===e.t0||void 0===e.t0?void 0:e.t0.message;try{n=JSON.parse(e.t0.message)}catch(e){}429===(null==n?void 0:n.statusCode)||(417===(null==n?void 0:n.statusCode)?(null===(r=g.A.error)||void 0===r||r.call(g.A,"Exceeded reset password attempts"),P(""),W("sign-in")):null===(o=g.A.error)||void 0===o||o.call(g.A,"Incorrect e-mail or user was not found"));case 20:x(!1);case 21:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(){return e.apply(this,arguments)}}();return m.createElement("div",{className:I.LoginPage},m.createElement("form",{className:I.loginForm,onSubmit:function(e){var t;k(!0),null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),"sign-in"===G&&M(e),"forgot-pass"===G&&J(),"reset-pass"===G&&O()}},m.createElement("img",{src:"/admin/static/logo_small_black.svg",width:"100px",className:I.logo}),"sign-in"===G&&m.createElement(m.Fragment,null,m.createElement(l.Z,{label:"E-mail",value:C,className:I.textField,onChange:function(e){return _(e.target.value)},fullWidth:!0,variant:"standard",id:"email-input",error:y&&!C}),m.createElement(l.Z,{label:"Password",type:r?"text":"password",value:S,onChange:function(e){return N(e.target.value)},className:I.textField,fullWidth:!0,id:"password-input",variant:"standard",error:y&&!S,InputProps:{endAdornment:m.createElement(i.Z,{position:"end"},m.createElement(c.Z,{"aria-label":"toggle password visibility",onClick:B,edge:"end"},r?m.createElement(d.Z,null):m.createElement(p.Z,null)))}}),m.createElement(u.Z,{type:"submit",onClick:M,className:I.loginBtn,disabled:h,variant:"outlined",color:"inherit"},"Login"),m.createElement("p",{onClick:function(){W("forgot-pass")},className:I.forgotPassText},"Forgot password?")),"forgot-pass"===G&&m.createElement(m.Fragment,null,m.createElement(l.Z,{label:"E-mail",value:C,className:I.textField,onChange:function(e){return _(e.target.value)},fullWidth:!0,variant:"standard",id:"email-input",error:y&&!S}),m.createElement(u.Z,{type:"submit",onClick:J,className:I.loginBtn,disabled:h,variant:"outlined",color:"inherit"},"Reset password"),m.createElement("p",{onClick:function(){return W("sign-in")},className:I.forgotPassText},"back")),"reset-pass"===G&&m.createElement(m.Fragment,null,m.createElement("p",{className:I.resetPassInstructions},"We sent you an e-mail with reset code. Copy the code below and create a new password"),m.createElement(l.Z,{label:"Code",value:A,className:I.textField,onChange:function(e){return P(e.target.value)},fullWidth:!0,variant:"standard",id:"code-input",error:y&&!A}),m.createElement(l.Z,{label:"New password",type:r?"text":"password",value:S,onChange:function(e){return N(e.target.value)},className:I.textField,fullWidth:!0,id:"password-input",error:y&&!S,variant:"standard",InputProps:{endAdornment:m.createElement(i.Z,{position:"end"},m.createElement(c.Z,{"aria-label":"toggle password visibility",onClick:B,edge:"end"},r?m.createElement(d.Z,null):m.createElement(p.Z,null)))}}),m.createElement(u.Z,{type:"submit",onClick:O,className:I.loginBtn,disabled:h,variant:"outlined",color:"inherit"},"Change password"))))}},96260:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(8081),a=n.n(r),o=n(23645),s=n.n(o)()(a());s.push([e.id,".LoginPage_pSRF4{position:fixed;display:flex;justify-content:center;align-items:center;top:0;bottom:0;left:0;right:0;z-index:9990;background-size:cover;background-position:center;background-color:#fff;color:#000}.loginForm_ZLfGz{width:300px;max-width:95vw;display:flex;justify-content:center;flex-direction:column;align-items:center}.loginForm_ZLfGz div.textField_GKiEX{margin-bottom:15px}svg.loginIcon_YET3s{width:50px;height:50px;margin-bottom:15px}button.loginBtn_CKHIV{margin-top:20px}.resetPassInstructions__rkqo{font-size:14px;font-weight:500;margin-bottom:15px}.forgotPassText_G7zyN{text-decoration:underline;font-size:14px;cursor:pointer;margin-top:15px}.logo_FTJCd{margin-bottom:50px;opacity:.8}.modeDark .LoginPage_pSRF4{background-color:#333}.modeDark .LoginPage_pSRF4 *{color:#eee}.modeDark .logo_FTJCd{filter:invert(1);opacity:1}",""]),s.locals={LoginPage:"LoginPage_pSRF4",loginForm:"loginForm_ZLfGz",textField:"textField_GKiEX",loginIcon:"loginIcon_YET3s",loginBtn:"loginBtn_CKHIV",resetPassInstructions:"resetPassInstructions__rkqo",forgotPassText:"forgotPassText_G7zyN",logo:"logo_FTJCd"};const l=s}}]);